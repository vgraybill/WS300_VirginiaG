<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="styles.css" rel="stylesheet" type="text/css">
    <link href="reset.css" rel="stylesheet" type="text/css">
   
    <title>The Pixel Patch</title>
</head>
<body>
    <header>
        <!-- Navigation and logo live here -->
        <h1>Game Logo Goes Here</h1>
        <nav>
            <ul>
                <li>Home</li>
                <li>Game Changes</li>
                <li>About</li>
        </ul>
    </nav>
    </header>

    <main>
        <!-- The game lives here -->
        <section id="game-area">
            <!-- this is the main game stage -->
            <div id="ui">
                <!-- this is the ui will be -->                
                <div id="universal-timer">
                    <!-- how much time has passed since the game loaded -->
                    <img src="timericon">
                    <p>0</p>
                </div>
                <div id="player-coins">
                    <!-- how much money the player has -->
                    <img src="coinicon">
                    <p>0</p>
                </div>
                <!-- which game mode the game is in currently, starts in grow, can be switched to .shop-mode -->
                <div id="game-mode" class="grow-mode">
                </div>

            </div>

            <div id="decor-area">
                <!-- this is the decoration pots will be, will likely just be for decoration, but if we have time we will add another game mode that allows fully grown flowers to be moved here for display -->
            </div>

            <div id="grow-area">
                <!-- this is the growing patch -->
                <div class="plot p1 planeted">
                    <div class="econ-ui">
                        <p>Buy</p>
                        <p>Sell</p>
                        <p>Growth <span>0</span>%</p>

                    </div>
                    <div class="plant plant1"></div>
                </div>
                
            </div>

        </section>
    </main>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script type="text/javascript">
        'use strict';

        //populate the #grow-area with 10 equally sized plots of land

        const growArea = $('#grow-area'),
            items =['p2','p3','p4','p5','p6','p7','p8','p9','p10'],
            theLength = items.length;

        // let plot = '';

        for(let i = 0; i < theLength; i++){
            let plot = $('<div>').addClass('plot '+items[i]).html('<div class="econ-ui"><p>Buy</p><p>Sell</p><p>Growth <span>0</span>%</p></div>')

            growArea.append(plot)
        }

        //CODE FOR THE UI

        //start universal timer in ui
        //give user 1000 coins
        //Shop/Grow mode toggles
        //let gameMode = 0; //0 is grow mode, 1 is shop mode

        //ON PAGE LOAD

        //put plant on first plot
        //set plants growth to 0
        //set plant's growth rate to 100

        // ------------------------------
        // ------------------------------

        // START PLANT PROPERTIES

        // ------------------------------
        // ------------------------------

        let growRate = 1,
            goalAmt = 100;
        let amt = 0
        
      

            function initialGrowth(){
                $('.econ-ui p span').text(Math.round(amt/goalAmt*100))

                let perc = amt/goalAmt;

                if(perc >= 1){
                    flowerStage = 'lightblue'
                }else if(perc <= .99 && perc >= .66){
                    flowerStage = 'green';
                }else if (perc >= .35 && perc < .66){
                    flowerStage = 'lime';
                } else if(perc > 0 && perc < .35 ) {
                    flowerStage = 'yellow';
                }
                $('.plant plant1').css({'background':flowerStage})
            }
//how do I set a new timer on a new flower when its summoned on a certain plot?
           

// How the hell do I get a plant on a specific plot
        // if (gameMode = 1){

            let plantNum = ['1', '2', '3', '4', '5', '6', '7', '8','9']
            let i = 0;

            function buyPlant(e){
                //figure out which plot was clicked
                //check to see if has plant
                //add plant when clicked
                var targetPlot = $( e.target );

                if (!$(targetPlot).hasClass('planted')){
                    targetPlot.prepend('<div class="plant plant'+plantNum[i]+'"></div>')
                    targetPlot.addClass('planted')
                }

            }
    
            function flowerGrowth(e){
                $('.econ-ui p span').text(Math.round(amt/goalAmt*100))

                let perc = amt/goalAmt;
                let flowerStage

                if(perc >= 1){
                    flowerStage = 'lightblue'
                }else if(perc <= .99 && perc >= .66){
                    flowerStage = 'green';
                }else if (perc >= .35 && perc < .66){
                    flowerStage = 'lime';
                } else if(perc > 0 && perc < .35 ) {
                    flowerStage = 'yellow';
                }
                $('.plant'+plantNum[i]).css({'background':flowerStage})
                
            }

            $('.plot').on('click dblclick', function (e){
         //target spans with ids and sets their value to empty
         console.log(e);
         e.stopPropagation();
         i++;
         buyPlant(e);
         flowerGrowth(e); 
            })
            let timer =setInterval(  function timePassed(){
            ++amt
            flowerGrowth()
        }, 1000);


        // }
        // if(hasPlant == false){
        //     //show buy button in shop mode
        //     //show cost of new plant to grow in shop mode
        // }
        //  if (hasPlant == true && plantGrowth = 1) { //plant growth = 100% grown, figure out numeric value
        //      //show sell button in shop mode
        //      //show how much the plant will sell for
        //      //show growth meter
        //  } else {
        //      //show growth meter
        //  }


    </script>
</body>
</html>